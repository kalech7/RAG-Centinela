\documentclass[12pt,oneside]{book}

% Plantilla/estilo EPN
\usepackage{tesis-epn}

% ====== Fuentes (XeLaTeX) ======
\usepackage{fontspec}
\setmainfont{TeX Gyre Pagella}   % Palatino compatible con Unicode
\setsansfont{TeX Gyre Heros}
\setmonofont{TeX Gyre Cursor} 

% ====== Idioma y codificación ======
\usepackage[spanish,english]{babel}     % con XeLaTeX funciona bien
\usepackage{csquotes}            % comillas correctas para el idioma

% ====== Matemáticas y listas ======
\usepackage{amsmath,amssymb,amsthm}
\usepackage{enumitem}

% ====== Tablas y captions ======
\usepackage{booktabs}
\usepackage{tcolorbox}
\usepackage{array}
\usepackage{ltablex}
\captionsetup[longtable]{position=bottom}
\keepXColumns
\addto\captionsspanish{\renewcommand{\tablename}{Tabla}}

\usepackage{multirow}
\usepackage{tabularx,ragged2e}
\renewcommand{\arraystretch}{1.12}   % aire vertical
\setlength{\tabcolsep}{5pt}          % separación horizontal
\newcolumntype{Y}{>{\RaggedRight\arraybackslash}X}        % X alineada a la izq.
\newcolumntype{C}[1]{>{\centering\arraybackslash}m{#1}}   % columna centrada verticalmente


% ====== Código (minted) ======
\usepackage{xcolor}
\usepackage{minted}
\usemintedstyle{vs}           
\setminted{breaklines,breakanywhere=false,fontsize=\small,tabsize=2}
\usepackage{algorithm}
\usepackage[noend]{algpseudocode}
\newcommand{\Assign}{\ensuremath{\leftarrow}}
\algrenewcommand\algorithmicrequire{\textbf{Input:}}
\algrenewcommand\algorithmicensure{\textbf{Output:}}
\algrenewcommand\algorithmicfunction{\textbf{Function}}
\addto\captionsenglish{\renewcommand{\algorithmname}{Algorithm}}
\newenvironment{algorithmEN}
  {\begin{otherlanguage*}{english}\begin{algorithm}}
  {\end{algorithm}\end{otherlanguage*}}


% ====== Gráficos y utilidades ======
\usepackage{graphicx}
\usepackage{tikz}
\usetikzlibrary{shapes.geometric,positioning,fit,backgrounds,calc,mindmap,trees,shadows}
\usepackage{pdflscape}
\usepackage{float}

% ====== Enlaces ======
\usepackage{xurl}                 % URLs largas
\usepackage{hyperref}             % SIEMPRE antes de bookmark
\usepackage{bookmark}

% ====== Microtipografía ======
\usepackage[final]{microtype}
\emergencystretch=2em


% ====== Bibliografía ======
\usepackage[
  backend=biber,
  style=numeric,
  sorting=nty,
  defernumbers=true,
  language=spanish
]{biblatex}
\usepackage{color}

\addbibresource{bibTesis.bib}

% ====== Colores y estilos TikZ ======
\definecolor{softyellow}{RGB}{255,245,200}
\definecolor{softpink}{RGB}{255,220,220}
\definecolor{softblue}{RGB}{215,230,245}
\definecolor{softpeach}{RGB}{255,235,215}
\definecolor{softcream}{RGB}{255,250,225}
\definecolor{softgreen}{RGB}{210,240,220}
\definecolor{softlilac}{RGB}{230,215,255}
\definecolor{softlav}{RGB}{235,225,255}
\definecolor{softrose}{RGB}{245,225,235}
\definecolor{softmint}{RGB}{215,245,225}
\definecolor{brandBlue}{RGB}{30,90,160}
\definecolor{blueSoft}{RGB}{210,230,250}
\definecolor{ink}{RGB}{20,28,38}
\definecolor{accent}{RGB}{255,140,105}

\tikzset{
  pill/.style={
    rounded corners=6pt, draw=black!65, line width=0.5pt,
    minimum width=12.5cm, minimum height=1.2cm, inner sep=0pt
  },
  roman/.style={
    fill=black!6, draw=black!65, line width=0.5pt, rounded corners=4pt,
    minimum width=1.1cm, minimum height=0.8cm, font=\bfseries\small
  },
  titletext/.style={font=\bfseries\small}
}

\tikzset{
    mm/base/.style={
        mindmap,
        grow cyclic,
        every node/.style={concept, align=center, font=\sffamily\footnotesize},
    },
    mm/level1/.style={
        level distance=3.9cm,
        sibling angle=72,
    },
    mm/root/.style={
        concept,
        font=\sffamily\bfseries\large,
        minimum size=2.3cm,
        text=white, % <-- SOLO NODO CENTRAL BLANCO
        fill=brandBlue!90!white,
        draw=brandBlue!90,
        line width=1.1pt,
    },
    mm/child/.style={
        concept,
        font=\sffamily\footnotesize,
        minimum size=1.7cm,
        text=black, % <-- HIJOS NEGRO
        fill=blueSoft!80!white,
        draw=brandBlue!80,
        line width=0.8pt,
        text width=2.15cm,
    },
    mm/childAlt/.style={
        mm/child,
        fill=blueSoft!60!white,
        draw=brandBlue!70,
        text=black, % <-- HIJOS NEGRO
    },
    root concept/.append style={
        fill=brandBlue!90!white,
        draw=brandBlue!90,
        text=white, % <-- SOLO NODO CENTRAL BLANCO
        concept color=brandBlue,
        minimum size=2.3cm,
        line width=1.1pt,
    },
    every child connection/.append style={
        draw=brandBlue!80,
        line width=0.9pt,
        fill=none,
        opacity=1,
    },
}

% ====== Comandos y metadatos ======
\input{comandos.tex}
\titulo{Integración de Modelos Generativos para la Recuperación Académica}
\carrera{Ingeniero de ciencias de la computacion}
\autor{Alejandro Sebastian Chavez Vega}
\correoautor{\url{chavezalejo85@gmail.com}}
\director{Dra. Gabriela Suntaxi}
\correodirector{\url{gabriela.suntaxi@epn.edu.ec}}
\fecha{Julio 2025}
\newcolumntype{L}[1]{>{\raggedright\arraybackslash}p{#1}}
\newcolumntype{S}{>{\raggedright\arraybackslash}p{0.20\textwidth}}
\newcolumntype{M}{>{\raggedright\arraybackslash}p{0.72\textwidth}}

\setcounter{biburlnumpenalty}{9000}
\setcounter{biburlucpenalty}{9000}
\setcounter{biburllcpenalty}{9000}
\AtBeginBibliography{\normalsize\sloppy}

% ====== Documento ======
\begin{document}

\frontmatter
\portadilla
\declaracion
\certificacion

\begin{agradecimiento}
    A todos.
\end{agradecimiento}

\begin{dedicatoria}
    A Georg Ferdinand Ludwig Philipp Cantor,\\
    pues nadie nos expulsará del paraíso que creó para nosotros.
\end{dedicatoria}

\tableofcontents

\include{Capitulos/00Resumen}

\mainmatter
\addtolength{\abovedisplayskip}{-1mm}
\addtolength{\belowdisplayskip}{-1mm}

\include{Capitulos/01Introduccion}
\include{Capitulos/02Metodologia}
\include{Capitulos/03Pruebas}

\cleardoublepage
\phantomsection
\nocite{*}
\printbibliography[heading=bibintoc,title={Bibliografía}]
\end{document}
